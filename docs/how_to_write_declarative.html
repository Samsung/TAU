<!DOCTYPE html>
<html>
	<head>
		<base href="">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>TAU</title>
		<meta charset="utf8">
		<meta http-equiv="X-UA-Compatible" content="IE-edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/bootstrap-callout.css" rel="stylesheet">
		<link href="js/smartmenus-0.9.7/css/sm-core-css.css" rel="stylesheet">
		<link href="js/smartmenus-0.9.7/css/sm-clean/sm-clean.css" rel="stylesheet">
		<link href="js/google-code-prettify/prettify.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
	</head>
	<body>
		<nav>
			<ul id="main-menu" class="sm sm-clean">
				<li><a href="index.html">TAU Guide</a></li>
				<li>
					<a href="javascript:void(0);">Working with TAU</a>
					<ul>
						<li><a href="application_visual_layout.html">Application visual Layout</a></li>
						<li><a href="basic_page_routing.html">Basic page routing</a></li>
						<li><a href="introduction_to_widgets.html">Introduction to widgets</a></li>
						<li><a href="using_jquery_with_tau.html">Using jQuery with TAU</a></li>
						<li><a href="framework_profiles.html">Framework profiles</a></li>
						<li><a href="how_to_create_own_widget.html">How to create own widget</a></li>
						<li><a href="how_to_use_globalize.html">How to use globalize</a></li>
						<li><a href="how_to_use_controller.html">How to use controller</a></li>
						<li><a href="how_to_write_declarative.html">How to write use declarative API</a></li>
					</ul>
				</li>
				
				<li>
					<a href="javascript:void(0);">Custom Elements</a>
					<ul>
						<li><a href="customelements/feature.html">Feature overview</a></li>
						<li><a href="customelements/custom_elements_preparation.html">Custom elements preparation</a></li>
						<li><a href="customelements/cehelloword.html">Tutorial for Custom Elements</a></li>
					</ul>
				</li>
				<li>
					<a href="javascript:void(0)">Tutorials</a>
					<ul>
						<li><a href="tutorial_clock.html">Clock</a></li>
						<li><a href="tutorial_notes.html">Notes</a></li>
						<li><a href="tutorial_gallery.html">Gallery</a></li>
					</ul>
				</li>
				<li>
					<a href="javascript:void(0)">Migration Guide</a>
					<ul>
						<li><a href="migration/features_overview.html">Features overview</a></li>
						<li><a href="migration/breaking_changes.html">Breaking changes</a></li>
						<li><a href="migration/switching_apps_to_tau.html">Switching your Apps to TAU</a></li>
					</ul>
				</li>
				<li><a href="api.html">API Docs</a></li>
				<li><a href="https://developer.tizen.org/forums/web-application-development" target="_blank">Forum</a></li>
			</ul>
		</nav>

		<article>
			<h1 id="how-to-write-apps-using-declarative-widgets">How to write apps using declarative widgets</h1>
<p>TAU widgets are, at the ground level, normal HTML markup elements that are <em>enchanced</em>
with JavaScriot logic. The problem with normal basic HTML markup is that it does not
exactly help to access the logic, so a global variable/namespace has to be used to
get the JS logic for a specific widget ex. <code>window.tau</code> object. TAU supports CustomElements
API to allow easy access to JavaScript widget code and to simplify widget markup.</p>
<p>An example can be shown of two ways we can create a widget and access the JS representation
of that element.</p>
<pre><code class="lang-mobile">&lt;div data-role=&quot;page&quot; id=&quot;myPage&quot;&gt;hello world!&lt;/div&gt;
&lt;script&gt;
    document.addEventListener(&quot;pageshow&quot;, function (e) {
        var pageElement = document.getElementById(&quot;myPage&quot;),
            pageWidget = tau.engine.instanceWidget(pageElement, &quot;page&quot;);
    }, false);
&lt;/script&gt;
</code></pre>
<p>As we can see the markup is a little bloated and the JS code is not optimal. When
CustomElements are used we can write as in example:</p>
<pre><code class="lang-mobile">&lt;tau-page id=&quot;myPage&quot;&gt;hello world!&lt;/tau-page&gt;
&lt;script&gt;
    document.addEventListener(&quot;pageshow&quot;, function () {
        var pageWidget = document.getElementById(&quot;myPage&quot;)._tauWidget;
    }, false);
&lt;/script&gt;
</code></pre>
<p>The code is simple and straightforward.</p>
<h2 id="element-properties">Element properties</h2>
<p>As seen in the example in the previous chapter, <code>class</code> and/or <code>data-role</code> attributes
are not used to create widgets. Each widget has its own tag, like in the mentioned example,
the <code>Page</code> widget is creating by using <code>&lt;tau-page&gt;</code> tag.</p>
<pre><code>&lt;tau-page&gt;my page content &lt;tau-button&gt;my button&lt;/tau-button&gt;&lt;/tau-page&gt;
</code></pre><p>When using TAU with its declarative markup API, almost all properties stay the same
with one difference. The <code>data-</code> prefix is not needed anymore, we can lose it in most
widgets. For example, when we want to disable the overlay layer for a popup:</p>
<pre><code>&lt;tau-popup overlay=&quot;false&quot;&gt;
    Popup
&lt;/tau-popup&gt;
</code></pre><h2 id="control-elements">Control elements</h2>
<p>The only difference that is visible is when using control elements like <code>input</code>, <code>select</code> etc.
They are written as before but we add the <code>is</code> attribute, which tells the browser what
widget the element represents.</p>
<pre><code class="lang-mobile">&lt;input is=&quot;tau-textinput&quot;&gt;
</code></pre>
<p>This is still CustomElements specification and is implement this way to properly handle
extending of native browser elements</p>
<h2 id="simple-notes-application">Simple notes application</h2>
<p>So, having the basics covered, we can write a simple Notes application to demonstrate
the usage of the declarative API. First we need 2 pages, first of the note list and
second for edit/add form</p>
<pre><code class="lang-mobile">&lt;tau-page id=&quot;main&quot;&gt;
    &lt;header&gt;Notes&lt;/header&gt;
    &lt;tau-scrollview class=&quot;ui-content&quot;&gt;
        &lt;tau-listview id=&quot;list&quot; class=&quot;ui-listview&quot;&gt;
            &lt;li class=&quot;ui-li-static&quot;&gt;Example note (click to edit)&lt;/li&gt;
        &lt;/tau-listview&gt;
    &lt;/tau-scrollview&gt;
    &lt;footer&gt;&lt;button id=&quot;add&quot;&gt;Add&lt;/button&gt;&lt;/footer&gt;
&lt;/tau-page&gt;
&lt;tau-page id=&quot;form&quot;&gt;
    &lt;header&gt;Notes&lt;/header&gt;
    &lt;tau-scrollview class=&quot;ui-content&quot;&gt;
        &lt;textarea is=&quot;tau-textarea&quot; id=&quot;data&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;
    &lt;/tau-scrollview&gt;
    &lt;footer&gt;
        &lt;button id=&quot;cancel&quot;&gt;Cancel&lt;/button&gt;
        &lt;button id=&quot;save&quot;&gt;Save&lt;/button&gt;
    &lt;/footer&gt;
&lt;/tau-page&gt;
</code></pre>
<p>We also need some JS logic to handle managing of note data. As show in the example by
using the simplified API that is bound to the element itself we can ease the process of
interacting with TAU widgets.</p>
<pre><code class="lang-mobile">&lt;tau-page id=&quot;main&quot;&gt;
    &lt;header&gt;Notes&lt;/header&gt;
    &lt;tau-scrollview class=&quot;ui-content&quot;&gt;
        &lt;tau-listview id=&quot;list&quot; class=&quot;ui-listview&quot;&gt;
            &lt;li class=&quot;ui-li-static&quot;&gt;Example note (click to edit)&lt;/li&gt;
        &lt;/tau-listview&gt;
    &lt;/tau-scrollview&gt;
    &lt;footer&gt;&lt;button id=&quot;add&quot;&gt;Add&lt;/button&gt;&lt;/footer&gt;
&lt;/tau-page&gt;
&lt;tau-page id=&quot;form&quot;&gt;
    &lt;header&gt;Notes&lt;/header&gt;
    &lt;tau-scrollview class=&quot;ui-content&quot;&gt;
        &lt;textarea is=&quot;tau-textarea&quot; id=&quot;data&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;
    &lt;/tau-scrollview&gt;
    &lt;footer&gt;
        &lt;button id=&quot;cancel&quot;&gt;Cancel&lt;/button&gt;
        &lt;button id=&quot;save&quot;&gt;Save&lt;/button&gt;
    &lt;/footer&gt;
&lt;/tau-page&gt;
&lt;script&gt;
    // initialize the code on first pageshow call
    tau.event.one(document, &quot;pageshow&quot;, function () {
        var list = document.getElementById(&quot;list&quot;),
            listPage = document.getElementById(&quot;main&quot;),
            addPage = document.getElementById(&quot;form&quot;),
            addButton = document.getElementById(&quot;add&quot;),
            cancelButton = document.getElementById(&quot;cancel&quot;),
            saveButton = document.getElementById(&quot;save&quot;),
            inputData = document.getElementById(&quot;data&quot;)._tauWidget,
            currentNoteIndex = -1,
            notes = [];

        list._tauWidget.refresh();

        // load existing data
        [].slice.call(list.children).forEach(function (note) {
            notes.push(note.textContent);
        });

        function addNoteElement(data) {
            var listElement = document.createElement(&quot;li&quot;);
            listElement.textContent = data;
            listElement.className = &quot;ui-li-static&quot;;
            list.appendChild(listElement);
        }

        function updateNoteElement(index, data) {
            if (index &gt; -1) {
                list.children[index].textContent = data;
            }
        }

        function removeNoteElement(index) {
            if (index &gt; -1) {
                list.removeChild(list.children[index]);
            }
        }

        tau.event.on(addButton, &quot;click&quot;, function () {
            tau.changePage(addPage);
        });

        tau.event.on(cancelButton, &quot;click&quot;, function () {
            currentNode = -1;
            tau.history.back();
        });

        // handle adding of new, editing and deletion
        tau.event.on(saveButton, &quot;click&quot;, function () {
            var value = inputData.value().trim();
            if (currentNoteIndex === -1 &amp;&amp; value.length &gt; 0) {
                addNoteElement(value);
                notes.push(value);
            } else {
                if (value.length &gt; 0) {
                    notes[currentNoteIndex] = value
                    updateNoteElement(currentNoteIndex, value);
                } else {
                    notes.splice(currentNoteIndex, 1);
                    removeNoteElement(currentNoteIndex);
                }
                currentNoteIndex = -1;
            }
            tau.changePage(listPage);
        });

        tau.event.on(addPage, &quot;pagebeforeshow&quot;, function () {
            if (currentNoteIndex &gt; -1) {
                inputData.value(notes[currentNoteIndex]);
            } else {
                inputData.value(&quot;&quot;);
            }
            inputData.refresh();
            addPage._tauWidget.refresh();
        });

        tau.event.on(listPage, &quot;pagebeforeshow&quot;, function (event) {
            event.target._tauWidget.refresh();
        });

        tau.event.on(list, &quot;click&quot;, function (event) {
            var target = event.target;
            if (target.parentNode === list &amp;&amp; target.tagName.toLowerCase() === &quot;li&quot;) {
                currentNoteIndex = [].slice.call(list.children).indexOf(target);
                tau.changePage(addPage);
            }
        });
    });
&lt;/script&gt;
</code></pre>

		</article>

		<footer>
			<div>Licensed under <a href="license.html">MIT License</a> by Samsung Electronics Co., Ltd. &copy;  2014</div>
			<div class="version">ver 0.13.46</div>
		</footer>

		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/google-code-prettify/prettify.js"></script>
		<script src="js/smartmenus-0.9.7/jquery.smartmenus.min.js"></script>
		<script src="js/taupreview.js"></script>
		<script>
			$(function () {
				$("#main-menu").smartmenus({
					showOnClick: true
				});
			});
		</script>
	</body>
</html>
